# Backbeat Selector (MuseScore 3.7 Plugin)
A MuseScore 3.x dialog plugin that filters note selections by **ordinal chord onsets** within a range selection.

This plugin allows you to select either:

* **Odd-numbered chord onsets** (1st, 3rd, 5th, …), or
* **Even-numbered chord onsets** (2nd, 4th, 6th, …)

counted **sequentially** within the selected range, **per staff and per voice**.

## About
This documentation was generated by ChatGPT except this section.

The plugin was designed by Atsushi Oka, with implementation and documentation
generated with the assistance of ChatGPT.

I am from Tokyo, Japan. While this documentation was machine generated, you can
probably have a conversation with me in English, Thai, Lao, Chinese or my
mother language Japanese. Please feel free to contact me if you have questions
or suggestions.


## Requirements

* **MuseScore 3.7.x**
* A score with an active **range selection**
* Works on standard staves and voices (voices 1–4)

---

## Installation

1. Copy the plugin file (e.g. `SelectOnbeatOffbeat.qml`) into your MuseScore plugins directory:

   * macOS
     `~/Documents/MuseScore3/Plugins/`
   * Linux
     `~/Documents/MuseScore3/Plugins/`
   * Windows
     `Documents\MuseScore3\Plugins\`

2. Restart MuseScore.

3. Enable the plugin in
   **Plugins → Plugin Manager**.

---

## Usage

1. In the score, create a **range selection** (blue rectangle) covering:

   * One or more measures
   * One or more staves

2. Run the plugin from the menu:

   **Plugins → Select Onbeat/Offbeat notes**

3. In the dialog:

   * Click **“Onbeats (1,3,5,…)”** to select odd-numbered chord onsets
   * Click **“Offbeats (2,4,6,…)”** to select even-numbered chord onsets
   * Click **Close** to exit the dialog

The previous selection will be cleared and replaced with the filtered notes.

---

## What “Onbeat / Offbeat” Means Here (Important)

This plugin **does NOT analyze musical beats or meter**.

Instead:

* Chords are counted **in the order they appear** while scanning the selected range.
* Counting is:

  * **Per staff**
  * **Per voice**
  * **Continuous** (no reset at barlines)
* Only **CHORD onsets** are counted.
* Rests, ties, and meter boundaries do **not** affect counting.

Example (per staff + voice):

| Chord order | Result  |
| ----------- | ------- |
| 1st chord   | Onbeat  |
| 2nd chord   | Offbeat |
| 3rd chord   | Onbeat  |
| 4th chord   | Offbeat |

This makes the plugin useful for:

* Alternating-note pattern selection
* Rhythmic experimentation
* Systematic filtering of dense passages
* Algorithmic or analytical workflows

It is **not** suitable if you need:

* Metric downbeats / upbeats
* Beat-based selection (e.g., quarter-note grid)
* Time-signature–aware processing

---

## Selection Behavior Details

* Selection applies to **notes**, not chord objects.
* All notes belonging to a qualifying chord are selected.
* Counting restarts for each staff and each voice independently.
* The plugin scans from the start of the range selection to the end tick (exclusive).
* Voices without chords are skipped naturally.

---

## Known Limitations

* No awareness of:

  * Time signatures
  * Beat strength
  * Tuplet structure
* Grace notes and tied continuations are not counted as separate onsets.
* Requires a **range selection**; single-note or list selections are ignored.

---

## Version

* **1.2**

---

## License

Public domain / MIT-style usage

---

## Notes for Developers

* Implemented as a **dialog plugin** (`pluginType: "dialog"`).
* Uses `Cursor.SCORE_START` and manual tick filtering.
* Selection is rebuilt explicitly using `curScore.selection.select(note, true)`.
* Designed for MuseScore 3.x plugin API (not compatible with MuseScore 4).


